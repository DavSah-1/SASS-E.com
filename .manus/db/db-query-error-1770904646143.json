{
  "query": "-- Add indexes to Supabase database tables for query optimization\n\n-- Conversations table indexes\nCREATE INDEX IF NOT EXISTS idx_conversations_user_id ON conversations(user_id);\nCREATE INDEX IF NOT EXISTS idx_conversations_created_at ON conversations(created_at);\nCREATE INDEX IF NOT EXISTS idx_conversations_user_id_created_at ON conversations(user_id, created_at);\n\n-- IoT Devices table indexes\nCREATE INDEX IF NOT EXISTS idx_iot_devices_user_id ON iot_devices(user_id);\nCREATE INDEX IF NOT EXISTS idx_iot_devices_status ON iot_devices(status);\nCREATE INDEX IF NOT EXISTS idx_iot_devices_user_id_status ON iot_devices(user_id, status);\n\n-- IoT Command History table indexes\nCREATE INDEX IF NOT EXISTS idx_iot_command_history_user_id ON iot_command_history(user_id);\nCREATE INDEX IF NOT EXISTS idx_iot_command_history_device_id ON iot_command_history(device_id);\nCREATE INDEX IF NOT EXISTS idx_iot_command_history_executed_at ON iot_command_history(executed_at);\nCREATE INDEX IF NOT EXISTS idx_iot_command_history_user_id_device_id ON iot_command_history(user_id, device_id);\n\n-- Quiz Attempts table indexes\nCREATE INDEX IF NOT EXISTS idx_quiz_attempts_user_id ON quiz_attempts(user_id);\nCREATE INDEX IF NOT EXISTS idx_quiz_attempts_quiz_id ON quiz_attempts(quiz_id);\nCREATE INDEX IF NOT EXISTS idx_quiz_attempts_created_at ON quiz_attempts(created_at);\nCREATE INDEX IF NOT EXISTS idx_quiz_attempts_user_id_quiz_id ON quiz_attempts(user_id, quiz_id);\n\n-- Budget Transactions table indexes\nCREATE INDEX IF NOT EXISTS idx_budget_transactions_user_id ON budget_transactions(user_id);\nCREATE INDEX IF NOT EXISTS idx_budget_transactions_category_id ON budget_transactions(category_id);\nCREATE INDEX IF NOT EXISTS idx_budget_transactions_transaction_date ON budget_transactions(transaction_date);\nCREATE INDEX IF NOT EXISTS idx_budget_transactions_user_id_date ON budget_transactions(user_id, transaction_date);\n\n-- Financial Goals table indexes\nCREATE INDEX IF NOT EXISTS idx_financial_goals_user_id ON financial_goals(user_id);\nCREATE INDEX IF NOT EXISTS idx_financial_goals_status ON financial_goals(status);\nCREATE INDEX IF NOT EXISTS idx_financial_goals_target_date ON financial_goals(target_date);\nCREATE INDEX IF NOT EXISTS idx_financial_goals_user_id_status ON financial_goals(user_id, status);",
  "command": "mysql --batch --raw --column-names --default-character-set=utf8mb4 --host gateway02.us-east-1.prod.aws.tidbcloud.com --port 4000 --user 3nggiiWQDu5Xrc9.root --database 8mC6ZNEwokHKmKSGT6E4hn --execute -- Add indexes to Supabase database tables for query optimization\n\n-- Conversations table indexes\nCREATE INDEX IF NOT EXISTS idx_conversations_user_id ON conversations(user_id);\nCREATE INDEX IF NOT EXISTS idx_conversations_created_at ON conversations(created_at);\nCREATE INDEX IF NOT EXISTS idx_conversations_user_id_created_at ON conversations(user_id, created_at);\n\n-- IoT Devices table indexes\nCREATE INDEX IF NOT EXISTS idx_iot_devices_user_id ON iot_devices(user_id);\nCREATE INDEX IF NOT EXISTS idx_iot_devices_status ON iot_devices(status);\nCREATE INDEX IF NOT EXISTS idx_iot_devices_user_id_status ON iot_devices(user_id, status);\n\n-- IoT Command History table indexes\nCREATE INDEX IF NOT EXISTS idx_iot_command_history_user_id ON iot_command_history(user_id);\nCREATE INDEX IF NOT EXISTS idx_iot_command_history_device_id ON iot_command_history(device_id);\nCREATE INDEX IF NOT EXISTS idx_iot_command_history_executed_at ON iot_command_history(executed_at);\nCREATE INDEX IF NOT EXISTS idx_iot_command_history_user_id_device_id ON iot_command_history(user_id, device_id);\n\n-- Quiz Attempts table indexes\nCREATE INDEX IF NOT EXISTS idx_quiz_attempts_user_id ON quiz_attempts(user_id);\nCREATE INDEX IF NOT EXISTS idx_quiz_attempts_quiz_id ON quiz_attempts(quiz_id);\nCREATE INDEX IF NOT EXISTS idx_quiz_attempts_created_at ON quiz_attempts(created_at);\nCREATE INDEX IF NOT EXISTS idx_quiz_attempts_user_id_quiz_id ON quiz_attempts(user_id, quiz_id);\n\n-- Budget Transactions table indexes\nCREATE INDEX IF NOT EXISTS idx_budget_transactions_user_id ON budget_transactions(user_id);\nCREATE INDEX IF NOT EXISTS idx_budget_transactions_category_id ON budget_transactions(category_id);\nCREATE INDEX IF NOT EXISTS idx_budget_transactions_transaction_date ON budget_transactions(transaction_date);\nCREATE INDEX IF NOT EXISTS idx_budget_transactions_user_id_date ON budget_transactions(user_id, transaction_date);\n\n-- Financial Goals table indexes\nCREATE INDEX IF NOT EXISTS idx_financial_goals_user_id ON financial_goals(user_id);\nCREATE INDEX IF NOT EXISTS idx_financial_goals_status ON financial_goals(status);\nCREATE INDEX IF NOT EXISTS idx_financial_goals_target_date ON financial_goals(target_date);\nCREATE INDEX IF NOT EXISTS idx_financial_goals_user_id_status ON financial_goals(user_id, status);",
  "returncode": 1,
  "logs": [
    "ERROR 1072 (42000) at line 4: column does not exist: user_id"
  ]
}